---
- name: deployment
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  vars:
    ansible_python_interpreter: "{{ lookup('ansible.builtin.pipe', 'which python3') }}"
  tasks:
    - name: Include deployment role (deployment tasks)
      ansible.builtin.include_role:
        name: deployment
        tasks_from: deployment.yml
      vars:
        context: thinkpad
        image:
          name: mamercad/snakebot
          tag: latest # "{{ lookup('pipe', 'cat ../VERSION') }}"
        service:
          port: 3000
        secret:
          SLACK_SIGNING_SECRET: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            30313235313734633366353636356466626166386433316430393538353439303238396235653931
            3932383062626231623736363738346439366664623161660a336264313238653132393134333536
            39343238633433666432306636656436616631373332626462306538383531633839343165656234
            6265356633316662370a393932303537613739376638313730376362663462646538326431646461
            39636361336335366438353733373962333865383133386634333934393839313861633462656532
            3362653438363635396239306232616264376264343637366335
          SLACK_BOT_TOKEN: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            34613464623437643533373664353562323535643331663561353432363064653262386233313139
            3034373037383061346636313930373030383963333862620a656666313061336230336465303436
            37306430366562356231376661373037313239306136383264666439653361303963633138666663
            3035646436663638620a386337653132396263663334653731666266616563333634333161326130
            61323962373635663538653262383833393932303831396362313739353438623833343061353732
            32643537303736613638383039346139333431363337616364373566393361663966623463303035
            32333733393965663462663966326333616564336134373463393134363936663362323661353039
            32613064303231316138
